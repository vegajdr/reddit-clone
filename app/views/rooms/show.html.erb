<% if @moderator %>
  <h4> You are a moderator of this subrepposteddit </h4>
<% end %>

<table class="table table-hover table-striped table-condensed">
  <h2> <%= @room.name %> </h2>
  <thead>
    <tr>
      <th>Title</th>
      <th>Text</th>
      <th>User</th>
      <th>Upvote</th>
      <th>Downvote</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody>
    <% @messages.each do |message| %>
      <tr>
        <td><%= link_to message.title, room_message_path(@room.id, message.id) %></td>
        <td><%= message.text %></td>
        <td><%= message.user.first_name %></td>
        <td>
          <%= link_to room_message_vote_path(@room.id, message.id, vote: "up"), method: :post do %>
            <span class="glyphicon glyphicon-arrow-up"></span>
          <% end %>
        </td>
        <td>
          <%= link_to room_message_vote_path(@room.id, message.id, vote: "down"), method: :post do %>
            <span class="glyphicon glyphicon-arrow-down"></span>
          <% end %>
        </td>
        <td> <% if policy(message).edit? %>
              <%= link_to "Edit", edit_room_message_path(@room.id, message.id), class: "btn btn-primary" %>
            <% end %>
        </td>
        <td> <% if policy(message).destroy? %>
              <%= link_to "Delete", room_message_path(@room.id, message.id), method: :delete, class: "btn btn-danger" %>
            <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<div>
  <%= link_to "New Comment", new_room_message_path(@room.id), class: "btn btn-primary" %>
</div>

<div>
  <%= will_paginate @messages, renderer: BootstrapPagination::Rails %>
</div>
